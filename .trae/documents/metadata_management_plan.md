# 元数据管理页面功能重构计划

## 1. 概述
本计划旨在重构和增强现有的“元数据管理”页面，使其从简单的列表展示升级为全功能的元数据治理中心。目标是提供从元数据发现、详情查看、业务属性管理到质量监控的一站式体验。

## 2. 功能模块规划

### 2.1 搜索与发现 (Search & Discovery)
**现状**: 仅有未生效的搜索框。
**规划**:
- **多维度筛选**:
  - **数据源**: 筛选特定数据源（如 Hive, MySQL, StarRocks）。
  - **数据库**: 根据数据源级联选择数据库。
  - **负责人**: 筛选特定负责人的表。
- **关键词搜索**: 支持表名、中文名（注释）的模糊搜索。
- **状态过滤**: 按存储格式、是否分区表等技术属性过滤。

### 2.2 增强列表视图 (Enhanced List View)
**现状**: 基础表格展示。
**规划**:
- **丰富展示列**:
  - **健康度**: 集成 `TableScore`，展示表的分数/等级。
  - **生命周期**: 展示最后访问时间、最近更新时间。
  - **存储信息**: 格式化展示大小（如 1.2GB）、记录数。
- **操作列**:
  - **查看详情**: 跳转至详情页。
  - **立即同步**: 单表触发元数据采集。
  - **血缘分析**: 快捷入口（如有）。

### 2.3 元数据详情页 (Detail View - 新增)
**现状**: 无。
**规划**: 点击列表项后进入详情页，包含以下 Tab：
1.  **概览 (Overview)**:
    - 基本信息：表名、数据库、负责人、描述、创建时间、存储位置。
    - 统计信息：行数、大小、文件格式、压缩格式。
2.  **字段结构 (Schema)**:
    - 列表展示：字段名、类型、描述、主键标识、安全等级。
    - **业务标注**: 允许用户编辑字段描述。
3.  **分区信息 (Partitions)**:
    - 展示分区字段及最新的分区列表（针对 Hive 表）。
4.  **数据预览 (Sample Data)**:
    - (可选) 仅对有权限用户展示前 10 条脱敏数据。
5.  **血缘关系 (Lineage)**:
    - (后期) 展示上下游表关系图。

### 2.4 管理功能 (Management)
**规划**:
- **业务属性编辑**: 允许数据管理员修改表的描述、重新指派负责人。
- **全量/增量同步**: 在页面顶部提供数据源级别的同步触发器。
- **标签管理**: 为表打上业务标签（如“核心资产”、“废弃”）。

## 3. 技术实施方案

### 3.1 后端 (Spring Boot)
1.  **API 增强**:
    - 升级 `GET /api/metadata/tables`: 支持 `keyword`, `dbName`, `owner` 等查询参数 (JPA Specification)。
    - 新增 `GET /api/metadata/table/{id}`: 获取单表完整详情。
    - 新增 `GET /api/metadata/table/{id}/columns`: 获取字段列表 (`ColumnMetadata`)。
    - 新增 `PUT /api/metadata/table/{id}`: 更新业务描述、负责人。
2.  **实体完善**:
    - 确保 `ColumnMetadata` 实体与 `dga_column_metadata` (或 `meta_column_info`) 映射正确。
    - 关联 `TableScore` 查询。

### 3.2 前端 (Vue + Ant Design)
1.  **组件重构**:
    - 拆分 `MetadataList.vue` 和 `MetadataDetail.vue`。
    - 封装 `MetadataFilter` 组件处理筛选逻辑。
2.  **路由配置**:
    - 新增 `/metadata/detail/:id` 路由。

## 4. 实施阶段 (Phasing)

- **Phase 1: 基础检索增强**
  - 实现后端多条件搜索接口。
  - 前端增加筛选栏（数据源、数据库下拉框）。
  - 联调搜索功能。

- **Phase 2: 详情页与字段展示**
  - 实现后端详情与字段查询接口。
  - 开发前端详情页模态框或独立页面。
  - 展示字段列表与基础统计。

- **Phase 3: 业务管理与交互**
  - 实现描述编辑与负责人修改功能。
  - 集成同步按钮的反馈状态。
